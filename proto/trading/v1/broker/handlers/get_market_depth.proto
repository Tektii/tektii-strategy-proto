syntax = "proto3";

package trading.v1.broker.handlers;

import "trading/v1/broker/common.proto";

// GetMarketDepthRequest requests order book data.
message GetMarketDepthRequest {
  // Trading symbol identifier
  string symbol = 1;
  // Number of price levels (default 10)
  int32 depth = 2;
}

// GetMarketDepthResponse returns current order book.
message GetMarketDepthResponse {
  // Trading symbol identifier
  string symbol = 1;
  // Timestamp of order book snapshot in microseconds since epoch
  int64 timestamp_us = 2;
  // Sorted by price descending
  repeated PriceLevel bids = 3;
  // Sorted by price ascending
  repeated PriceLevel asks = 4;
}

// PriceLevel represents a level in the order book.
message PriceLevel {
  // Price level
  broker.PreciseDecimal price = 1;
  // Total quantity available at this price level
  broker.PreciseDecimal size = 2;
  // Number of orders at this level
  int32 order_count = 3;
}
