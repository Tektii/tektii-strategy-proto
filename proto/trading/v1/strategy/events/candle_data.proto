syntax = "proto3";

package trading.v1.strategy.events;

import "trading/v1/strategy/common.proto";

// CandleData represents aggregated OHLCV data for a time period.
message CandleData {
  // Trading symbol identifier
  string symbol = 1;

  // OHLCV data
  // Opening price for the period
  strategy.PreciseDecimal open = 2;
  // Highest price during the period
  strategy.PreciseDecimal high = 3;
  // Lowest price during the period
  strategy.PreciseDecimal low = 4;
  // Closing price for the period
  strategy.PreciseDecimal close = 5;
  // Total volume traded during the period
  int64 volume = 6;

  // Additional aggregates
  // Volume-weighted average price
  strategy.PreciseDecimal vwap = 7;
  // Number of trades in this candle
  int64 trade_count = 8;

  // Candle metadata
  enum CandleType {
    // Default unspecified candle type
    CANDLE_TYPE_UNSPECIFIED = 0;
    // Time-based candles (1min, 5min, etc.)
    CANDLE_TYPE_TIME = 1;
    // Tick count based (every N ticks)
    CANDLE_TYPE_TICK = 2;
    // Volume based (every N shares)
    CANDLE_TYPE_VOLUME = 3;
    // Dollar value based (every $N traded)
    CANDLE_TYPE_DOLLAR = 4;
  }
  // Type of candle aggregation
  CandleType candle_type = 9;
  // e.g., 1 for 1min, 5 for 5min
  int32 candle_size = 10;
  // e.g., "min", "hour", "day"
  string candle_size_unit = 11;
}
