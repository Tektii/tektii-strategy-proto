syntax = "proto3";

package trading.v1.broker.handlers;

import "trading/v1/broker/common.proto";

// CancelOrderRequest cancels an existing order.
message CancelOrderRequest {
  // ID of the order to cancel
  string order_id = 1;
  // Client-provided ID for request tracking
  string request_id = 2;
}

// CancelOrderResponse confirms cancellation.
message CancelOrderResponse {
  // Whether the cancellation was accepted
  bool accepted = 1;
  // ID of the order being cancelled
  string order_id = 2;
  // Echo of client request ID
  string request_id = 3;

  // Human-readable rejection reason if not accepted
  string reject_reason = 4;
  // Structured rejection code if not accepted
  RejectCode reject_code = 5;

  // State at cancellation
  // Status of order before cancellation
  OrderStatus previous_status = 6;
  // Quantity filled before cancellation
  double filled_quantity = 7;

  // Server timestamp of cancellation
  int64 timestamp_us = 8;
}
