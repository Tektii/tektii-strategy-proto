syntax = "proto3";

package broker.v1;

import "broker/v1/broker_common.proto";

// ModifyOrderRequest changes order parameters (only set what needs to change).
// This is used to update existing orders without canceling and creating new ones.
message ModifyOrderRequest {
  // ID of the order to modify
  string order_id = 1;

  // New order quantity
  PreciseDecimal quantity = 2;
  // New limit price for limit orders
  PreciseDecimal limit_price = 3;
  // New stop price for stop orders
  PreciseDecimal stop_price = 4;

  // Client-provided ID for request tracking
  string request_id = 5;

  // Broker to modify order with (e.g., "alpaca", "interactive_brokers")
  Broker broker = 6;
}

// ModifyOrderResponse confirms modification.
message ModifyOrderResponse {
  // Whether the modification was accepted
  bool accepted = 1;
  // ID of the order being modified
  string order_id = 2;
  // Echo of client request ID
  string request_id = 3;

  // Human-readable rejection reason if not accepted
  string reject_reason = 4;
  // Structured error code if not accepted
  ErrorCode error_code = 5;

  // Server timestamp of modification
  int64 timestamp_us = 6;
}
