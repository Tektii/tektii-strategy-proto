syntax = "proto3";

package trading.v1.broker.handlers;

import "trading/v1/broker/common.proto";

// GetHistoricalDataRequest requests historical candle data.
message GetHistoricalDataRequest {
  // Trading symbol identifier
  string symbol = 1;
  // Start time in microseconds since epoch
  int64 start_timestamp_us = 2;
  // End time in microseconds since epoch
  int64 end_timestamp_us = 3;

  // Candle size options
  // Options: "1min", "5min", "15min", "30min", "1hour", "4hour", "1day"
  string candle_size = 4;

  // Maximum number of candles to return
  // Range: 1-10000
  int32 limit = 5;

  // Broker to get historical data from (e.g., "alpaca", "interactive_brokers")
  Broker broker = 6;
}

// GetHistoricalDataResponse returns historical candle data.
message GetHistoricalDataResponse {
  // Trading symbol identifier
  string symbol = 1;
  // Candle timeframe that was requested
  string candle_size = 2;
  // Historical OHLCV data ordered by timestamp
  repeated Candle candles = 3;
}
